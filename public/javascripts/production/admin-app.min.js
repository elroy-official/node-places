!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,module,exports){!function($){$.extend({tablesorter:new function(){function benchmark(a,b){log(a+","+((new Date).getTime()-b.getTime())+"ms")}function log(a){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(a):alert(a)}function buildParserCache(a,b){if(a.config.debug)var c="";if(0!=a.tBodies.length){var d=a.tBodies[0].rows;if(d[0])for(var e=[],f=d[0].cells,g=f.length,h=0;g>h;h++){var i=!1;$.metadata&&$(b[h]).metadata()&&$(b[h]).metadata().sorter?i=getParserById($(b[h]).metadata().sorter):a.config.headers[h]&&a.config.headers[h].sorter&&(i=getParserById(a.config.headers[h].sorter)),i||(i=detectParserForColumn(a,d,-1,h)),a.config.debug&&(c+="column:"+h+" parser:"+i.id+"\n"),e.push(i)}return a.config.debug&&log(c),e}}function detectParserForColumn(a,b,c,d){for(var e=parsers.length,f=!1,g=!1,h=!0;""==g&&h;)c++,b[c]?(f=getNodeFromRowAndCellIndex(b,c,d),g=trimAndGetNodeText(a.config,f),a.config.debug&&log("Checking if value was empty on row:"+c)):h=!1;for(var i=1;e>i;i++)if(parsers[i].is(g,a,f))return parsers[i];return parsers[0]}function getNodeFromRowAndCellIndex(a,b,c){return a[b].cells[c]}function trimAndGetNodeText(a,b){return $.trim(getElementText(a,b))}function getParserById(a){for(var b=parsers.length,c=0;b>c;c++)if(parsers[c].id.toLowerCase()==a.toLowerCase())return parsers[c];return!1}function buildCache(a){if(a.config.debug)var b=new Date;for(var c=a.tBodies[0]&&a.tBodies[0].rows.length||0,d=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,e=a.config.parsers,f={row:[],normalized:[]},g=0;c>g;++g){var h=$(a.tBodies[0].rows[g]),i=[];if(h.hasClass(a.config.cssChildRow))f.row[f.row.length-1]=f.row[f.row.length-1].add(h);else{f.row.push(h);for(var j=0;d>j;++j)i.push(e[j].format(getElementText(a.config,h[0].cells[j]),a,h[0].cells[j]));i.push(f.normalized.length),f.normalized.push(i),i=null}}return a.config.debug&&benchmark("Building cache for "+c+" rows:",b),f}function getElementText(a,b){var c="";return b?(a.supportsTextContent||(a.supportsTextContent=b.textContent||!1),c="simple"==a.textExtraction?a.supportsTextContent?b.textContent:b.childNodes[0]&&b.childNodes[0].hasChildNodes()?b.childNodes[0].innerHTML:b.innerHTML:"function"==typeof a.textExtraction?a.textExtraction(b):$(b).text()):""}function appendToTable(a,b){if(a.config.debug)var c=new Date;for(var d=b,e=d.row,f=d.normalized,g=f.length,h=f[0].length-1,i=$(a.tBodies[0]),j=[],k=0;g>k;k++){var l=f[k][h];if(j.push(e[l]),!a.config.appender)for(var m=e[l].length,n=0;m>n;n++)i[0].appendChild(e[l][n])}a.config.appender&&a.config.appender(a,j),j=null,a.config.debug&&benchmark("Rebuilt table:",c),applyWidget(a),setTimeout(function(){$(a).trigger("sortEnd")},0)}function buildHeaders(a){if(a.config.debug)var b=new Date;var c=($.metadata?!0:!1,computeTableHeaderCellIndexes(a));return $tableHeaders=$(a.config.selectorHeaders,a).each(function(b){if(this.column=c[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(a.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(a,b))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(a,b)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(a,b)),!this.sortDisabled){var d=$(this).addClass(a.config.cssHeader);a.config.onRenderHeader&&a.config.onRenderHeader.apply(d)}a.config.headerList[b]=this}),a.config.debug&&(benchmark("Built headers:",b),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(a){for(var b=[],c={},d=a.getElementsByTagName("THEAD")[0],e=d.getElementsByTagName("TR"),f=0;f<e.length;f++)for(var g=e[f].cells,h=0;h<g.length;h++){var i,j=g[h],k=j.parentNode.rowIndex,l=k+"-"+j.cellIndex,m=j.rowSpan||1,n=j.colSpan||1;"undefined"==typeof b[k]&&(b[k]=[]);for(var o=0;o<b[k].length+1;o++)if("undefined"==typeof b[k][o]){i=o;break}c[l]=i;for(var o=k;k+m>o;o++){"undefined"==typeof b[o]&&(b[o]=[]);for(var p=b[o],q=i;i+n>q;q++)p[q]="x"}}return c}function checkCellColSpan(a,b,c){for(var d=[],e=a.tHead.rows,f=e[c].cells,g=0;g<f.length;g++){var h=f[g];h.colSpan>1?d=d.concat(checkCellColSpan(a,headerArr,c++)):(1==a.tHead.length||h.rowSpan>1||!e[c+1])&&d.push(h)}return d}function checkHeaderMetadata(a){return $.metadata&&$(a).metadata().sorter===!1?!0:!1}function checkHeaderOptions(a,b){return a.config.headers[b]&&a.config.headers[b].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(a,b){return a.config.headers[b]&&a.config.headers[b].lockedOrder?a.config.headers[b].lockedOrder:!1}function applyWidget(a){for(var b=a.config.widgets,c=b.length,d=0;c>d;d++)getWidgetById(b[d]).format(a)}function getWidgetById(a){for(var b=widgets.length,c=0;b>c;c++)if(widgets[c].id.toLowerCase()==a.toLowerCase())return widgets[c]}function formatSortingOrder(a){return"Number"!=typeof a?"desc"==a.toLowerCase()?1:0:1==a?1:0}function isValueInArray(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d][0]==a)return!0;return!1}function setHeadersCss(a,b,c,d){b.removeClass(d[0]).removeClass(d[1]);var e=[];b.each(function(){this.sortDisabled||(e[this.column]=$(this))});for(var f=c.length,g=0;f>g;g++)e[c[g][0]].addClass(d[c[g][1]])}function fixColumnWidth(a){var b=a.config;if(b.widthFixed){var c=$("<colgroup>");$("tr:first td",a.tBodies[0]).each(function(){c.append($("<col>").css("width",$(this).width()))}),$(a).prepend(c)}}function updateHeaderSortCount(a,b){for(var c=a.config,d=b.length,e=0;d>e;e++){var f=b[e],g=c.headerList[f[0]];g.count=f[1],g.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(a,b,c){var d="a["+c+"]",e="b["+c+"]";return"text"==a&&"asc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+e+") ? -1 : 1 )));":"text"==a&&"desc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+d+") ? -1 : 1 )));":"numeric"==a&&"asc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+e+"));":"numeric"==a&&"desc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+d+"));":void 0}function makeSortText(a){return"((a["+a+"] < b["+a+"]) ? -1 : ((a["+a+"] > b["+a+"]) ? 1 : 0));"}function makeSortTextDesc(a){return"((b["+a+"] < a["+a+"]) ? -1 : ((b["+a+"] > a["+a+"]) ? 1 : 0));"}function makeSortNumeric(a){return"a["+a+"]-b["+a+"];"}function makeSortNumericDesc(a){return"b["+a+"]-a["+a+"];"}function sortText(a,b){return table.config.sortLocaleCompare?a.localeCompare(b):b>a?-1:a>b?1:0}function sortTextDesc(a,b){return table.config.sortLocaleCompare?b.localeCompare(a):a>b?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(a,b){return a[b].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(a){return this.each(function(){if(this.tHead&&this.tBodies){var b,c,d,e;this.config={},e=$.extend(this.config,$.tablesorter.defaults,a),b=$(this),$.data(this,"tablesorter",e),c=buildHeaders(this),this.config.parsers=buildParserCache(this,c),d=buildCache(this);var f=[e.cssDesc,e.cssAsc];fixColumnWidth(this),c.click(function(a){var g=b[0].tBodies[0]&&b[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&g>0){b.trigger("sortStart");var h=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),a[e.sortMultiSortKey])if(isValueInArray(h,e.sortList))for(var i=0;i<e.sortList.length;i++){var j=e.sortList[i],k=e.headerList[j[0]];j[0]==h&&(k.count=j[1],k.count++,j[1]=k.count%2)}else e.sortList.push([h,this.order]);else{if(e.sortList=[],null!=e.sortForce)for(var l=e.sortForce,i=0;i<l.length;i++)l[i][0]!=h&&e.sortList.push(l[i]);e.sortList.push([h,this.order])}return setTimeout(function(){setHeadersCss(b[0],c,e.sortList,f),appendToTable(b[0],multisort(b[0],e.sortList,d))},1),!1}}).mousedown(function(){return e.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),b.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=buildParserCache(a,c),d=buildCache(a)},1)}).bind("updateCell",function(a,b){var c=this.config,e=[b.parentNode.rowIndex-1,b.cellIndex];d.normalized[e[0]][e[1]]=c.parsers[e[1]].format(getElementText(c,b),b)}).bind("sorton",function(a,b){$(this).trigger("sortStart"),e.sortList=b;var g=e.sortList;updateHeaderSortCount(this,g),setHeadersCss(this,c,g,f),appendToTable(this,multisort(this,g,d))}).bind("appendCache",function(){appendToTable(this,d)}).bind("applyWidgetId",function(a,b){getWidgetById(b).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(e.sortList=$(this).metadata().sortlist),e.sortList.length>0&&b.trigger("sorton",[e.sortList]),applyWidget(this)}})},this.addParser=function(a){for(var b=parsers.length,c=!0,d=0;b>d;d++)parsers[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&parsers.push(a)},this.addWidget=function(a){widgets.push(a)},this.formatFloat=function(a){var b=parseFloat(a);return isNaN(b)?0:b},this.formatInt=function(a){var b=parseInt(a);return isNaN(b)?0:b},this.isDigit=function(a){return/^[-+]?\d*$/.test($.trim(a.replace(/[,.']/g,"")))},this.clearTableBody=function(a){function b(){for(;this.firstChild;)this.removeChild(this.firstChild)}$.browser.msie?b.apply(a.tBodies[0]):a.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(){return!0},format:function(a){return $.trim(a.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(a,b){var c=b.config;return $.tablesorter.isDigit(a,c)},format:function(a){return $.tablesorter.formatFloat(a)},type:"numeric"}),ts.addParser({id:"currency",is:function(a){return/^[£$€?.]/.test(a)},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var b=a.split("."),c="",d=b.length,e=0;d>e;e++){var f=b[e];c+=2==f.length?"0"+f:f}return $.tablesorter.formatFloat(c)},type:"numeric"}),ts.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return $.tablesorter.formatFloat(""!=a?new Date(a.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(a){return/\%$/.test($.trim(a))},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return $.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,b){var c=b.config;return a=a.replace(/\-/g,"/"),"us"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"pt"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"uk"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==c.dateFormat||"dd-mm-yy"==c.dateFormat)&&(a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return $.tablesorter.formatFloat(new Date("2000/01/01 "+a).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(a,b,c){var d=b.config,e=d.parserMetadataName?d.parserMetadataName:"sortValue";return $(c).metadata()[e]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(a){if(a.config.debug)var b=new Date;var c,d,e=-1;$("tr:visible",a.tBodies[0]).each(function(){c=$(this),c.hasClass(a.config.cssChildRow)||e++,d=e%2==0,c.removeClass(a.config.widgetZebra.css[d?0:1]).addClass(a.config.widgetZebra.css[d?1:0])}),a.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",b)}})}(jQuery)},{}],2:[function(a){a("./config/mainapp-config-loader.coffee"),window.NZ=new Marionette.Application,a("./entity/admin-entity-loader.coffee"),a("./admin/admin-app-loader.coffee"),a("./admin-init.coffee"),NZ.start()},{"./admin-init.coffee":3,"./admin/admin-app-loader.coffee":4,"./config/mainapp-config-loader.coffee":10,"./entity/admin-entity-loader.coffee":13}],3:[function(){NZ.addRegions({mainContentRegion:"#page-content"}),NZ.reqres.setHandler("default:region",function(){return NZ.mainContentRegion}),NZ.commands.setHandler("register:instance",function(a,b){return NZ.register(a,b)}),NZ.commands.setHandler("unregister:instance",function(a,b){return NZ.unregister(a,b)}),NZ.on("start",function(){return NZ.vent.trigger("start:router")})},{}],4:[function(a){a("./router/admin-router-app.coffee"),a("./places/admin-edit-places-controller.coffee")},{"./places/admin-edit-places-controller.coffee":5,"./router/admin-router-app.coffee":9}],5:[function(a){var b,c=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},d={}.hasOwnProperty;a("./admin-edit-places-view.coffee"),b=a("../../config/region-controller.coffee"),NZ.AdminEditPlacesController=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.initialize=function(a){var b;return this.region=NZ.mainContentRegion,this.model=null!=a.model?a.model:new Backbone.Model({id:"0",name:"Country"}),console.log(this.model),b=NZ.request("get:places:list",this.model.id),b.then(function(a){return function(b){return a.collection=b,a.view=a._getPlacesView(),a.listenTo(a.view,"save:new:place",a.saveNewPlace),a.listenTo(a.view,"go:back",a.goBack),a.show(a.view)}}(this))},b.prototype._getPlacesView=function(){return new NZ.AdminEditPlacesView({model:this.model,collection:this.collection})},b.prototype.goBack=function(){var a;return"0"===this.model.get("parent")?NZ.execute("show:places:app:controller"):(a=NZ.request("get:place:by:id",this.model.get("parent")),a.then(function(a){return NZ.execute("show:places:app:controller",{model:a})}))},b.prototype.saveNewPlace=function(a){var b;return a.parent=this.model.id,b=NZ.request("create:places",a),b.then(function(a){return function(b){return a.collection.add(b),a.view.triggerMethod("new:place:saved")}}(this),function(a){return function(b,c){return console.log(c.message),a.view.triggerMethod("new:place:error")}}(this))},b}(b),NZ.commands.setHandler("show:places:app:controller",function(a){return new NZ.AdminEditPlacesController(a)})},{"../../config/region-controller.coffee":12,"./admin-edit-places-view.coffee":7}],6:[function(a,b){var c=a("hbsfy/runtime");b.exports=c.template({1:function(){return'		  	<button class="btn btn-success places-back"><i class="glyphicon glyphicon-menu-left"></i> Back</button\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=b.helperMissing,i="function",j='<div class="well well-lg">\r\n		<div class="panel panel-default">\r\n		  <div class="panel-heading">\r\n';return f=null!=(f=b.notCountry||(null!=a?a.notCountry:a))?f:h,g={name:"notCountry",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d},e=typeof f===i?f.call(a,g):f,b.notCountry||(e=b.blockHelperMissing.call(a,e,g)),null!=e&&(j+=e),j+'		    <h3 class="panel-title">'+this.escapeExpression((f=null!=(f=b.name||(null!=a?a.name:a))?f:h,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+'</h3>\r\n		  </div>\r\n		  <div class="panel-body">\r\n		    <table class="table table-bordered table-striped table-hover">\r\n		    	<thead>\r\n		    		<tr>\r\n		    			<th>Sr. No</th>\r\n		    			<th>Name</th>\r\n		    			<th>Latitude</th>\r\n		    			<th>Longitude</th>\r\n		    			<th>Action</th>\r\n		    					    			\r\n		    		</tr>\r\n		    	</thead>\r\n		    	<tbody class="child-view-holder">\r\n		    		\r\n		    		\r\n		    	</tbody>\r\n		    	<tfoot>\r\n		    		<tr class="new-place">\r\n		    			<td></td>\r\n		    			<td><input type="text" class="form-control" name="name" placeholder="Place name"></td>\r\n		    			<td><input type="text" class="form-control" name="lat" placeholder="latitude"></td>\r\n		    			<td><input type="text" class="form-control" name="long" placeholder="longitude"></td>\r\n		    			<td colspan="2"><button type="button" class="btn btn-primary add-new-place"><i class="glyphicon glyphicon-plus-sign"></i> Add Place</button></td>\r\n		    			\r\n\r\n		    		</tr>\r\n		    	</tfoot>\r\n		    </table>\r\n		  </div>\r\n		</div>\r\n\r\n	</div>'},useData:!0})},{"hbsfy/runtime":22}],7:[function(a){var b,c,d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=a("./admin-edit-places-template.hbs"),d=a("./single-place-edit-template.hbs"),a("../../../../bower_components/tablesorter/jquery.tablesorter.min.js"),b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="tr",b.prototype.className="existing-place",b.prototype.template=d,b.prototype.events={"click .view-place":"viewPlace","click .delete-place":"deletePlace","click .edit-place":"editPlace","click .save-place":"savePlace","click .cancel-place":"cancelPlace"},b.prototype.mixinTemplateHelpers=function(a){return a=b.__super__.mixinTemplateHelpers.call(this,a),a.index=this.index,a.viewEditPlace=this.viewEditPlace,a},b.prototype.initialize=function(a){return this.index=a.index,this.viewEditPlace=!0},b.prototype.viewPlace=function(){return NZ.execute("show:places:app:controller",{model:this.model})},b.prototype.deletePlace=function(){return this.model.destroy()},b.prototype.editPlace=function(){return this.viewEditPlace=!1,this.render()},b.prototype.savePlace=function(){var a,b,c;return this.$el.find(" input").parent().removeClass("has-error"),c=this.$el.find(' input[name="name"]').val(),a=parseFloat(this.$el.find(' input[name="lat"]').val()),b=parseFloat(this.$el.find(' input[name="long"]').val()),""!==c&&90>a&&a>-90&&180>b&&b>-180&&(this.model.set({name:c,lat:a,"long":b}),this.model.save().then(function(a){return function(){return console.log(a),a.viewEditPlace=!0,a.render()}}(this))),""===c&&this.$el.find(' input[name="name"]').parent().addClass("has-error"),(-90>a||a>90||_.isNaN(a))&&this.$el.find(' input[name="lat"]').parent().addClass("has-error"),-180>b||b>180||_.isNaN(b)?this.$el.find(' input[name="long"]').parent().addClass("has-error"):void 0},b.prototype.cancelPlace=function(){return this.viewEditPlace=!0,this.render()},b}(Marionette.ItemView),NZ.AdminEditPlacesView=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return e(d,a),d.prototype.className="admin-place-edit",d.prototype.template=c,d.prototype.childView=b,d.prototype.childViewContainer=".child-view-holder",d.prototype.childViewOptions=function(a,b){return{index:b+1}},d.prototype.events={"click .add-new-place":"addNewPlace","click .places-back":"goBack"},d.prototype.mixinTemplateHelpers=function(a){return a=d.__super__.mixinTemplateHelpers.call(this,a),"0"!==this.model.id&&(a.notCountry=!0),a},d.prototype.onShow=function(){return this.$el.find("table").tablesorter()},d.prototype.goBack=function(){return this.trigger("go:back")},d.prototype.addNewPlace=function(){var a,b,c;return this.$el.find(".new-place input").parent().removeClass("has-error"),c=this.$el.find('.new-place input[name="name"]').val(),a=parseFloat(this.$el.find('.new-place input[name="lat"]').val()),b=parseFloat(this.$el.find('.new-place input[name="long"]').val()),""!==c&&90>a&&a>-90&&180>b&&b>-180&&(console.log(c),console.log(a),console.log(b),this.trigger("save:new:place",{name:c,lat:a,"long":b})),""===c&&this.$el.find('.new-place input[name="name"]').parent().addClass("has-error"),(-90>a||a>90||_.isNaN(a))&&this.$el.find('.new-place input[name="lat"]').parent().addClass("has-error"),-180>b||b>180||_.isNaN(b)?this.$el.find('.new-place input[name="long"]').parent().addClass("has-error"):void 0},d.prototype.onNewPlaceSaved=function(){return this.$el.find(".new-place input").val("")},d}(Marionette.CompositeView)},{"../../../../bower_components/tablesorter/jquery.tablesorter.min.js":1,"./admin-edit-places-template.hbs":6,"./single-place-edit-template.hbs":8}],8:[function(a,b){var c=a("hbsfy/runtime");b.exports=c.template({1:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return"<td>"+h((e=null!=(e=b.index||(null!=a?a.index:a))?e:f,typeof e===g?e.call(a,{name:"index",hash:{},data:d}):e))+"</td>\r\n<td>"+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,typeof e===g?e.call(a,{name:"name",hash:{},data:d}):e))+"</td>\r\n<td>"+h((e=null!=(e=b.lat||(null!=a?a.lat:a))?e:f,typeof e===g?e.call(a,{name:"lat",hash:{},data:d}):e))+"</td>\r\n<td>"+h((e=null!=(e=b["long"]||(null!=a?a["long"]:a))?e:f,typeof e===g?e.call(a,{name:"long",hash:{},data:d}):e))+'</td>\r\n<td><button type="button" class="btn btn-primary edit-place"><i class="glyphicon glyphicon-pencil"></i> Edit</button> \r\n<button type="button" class="btn btn-danger delete-place">Delete</button> \r\n<button type="button" class="btn btn-success view-place"><i class="glyphicon glyphicon-eye-open"></i> View</button></td>\r\n'},3:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return"<td>"+h((e=null!=(e=b.index||(null!=a?a.index:a))?e:f,typeof e===g?e.call(a,{name:"index",hash:{},data:d}):e))+'</td>\r\n<td><input type="text" class="form-control" name="name" placeholder="Place name" value="'+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,typeof e===g?e.call(a,{name:"name",hash:{},data:d}):e))+'"></td>\r\n<td><input type="text" class="form-control" name="lat" placeholder="latitude" value="'+h((e=null!=(e=b.lat||(null!=a?a.lat:a))?e:f,typeof e===g?e.call(a,{name:"lat",hash:{},data:d}):e))+'"></td>\r\n<td><input type="text" class="form-control" name="long" placeholder="longitude" value="'+h((e=null!=(e=b["long"]||(null!=a?a["long"]:a))?e:f,typeof e===g?e.call(a,{name:"long",hash:{},data:d}):e))+'"></td>\r\n\r\n<td ><button type="button" class="btn btn-primary save-place"><i class="glyphicon glyphicon-plus-sign"></i> Save Place</button>\r\n<button type="button" class="btn btn-danger cancel-place"><i class="glyphicon glyphicon-plus-sign"></i> Cancel</button>\r\n</td>\r\n\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=b.helperMissing,i="function",j=b.blockHelperMissing,k="";return f=null!=(f=b.viewEditPlace||(null!=a?a.viewEditPlace:a))?f:h,g={name:"viewEditPlace",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d},e=typeof f===i?f.call(a,g):f,b.viewEditPlace||(e=j.call(a,e,g)),null!=e&&(k+=e),f=null!=(f=b.viewEditPlace||(null!=a?a.viewEditPlace:a))?f:h,g={name:"viewEditPlace",hash:{},fn:this.noop,inverse:this.program(3,d,0),data:d},e=typeof f===i?f.call(a,g):f,b.viewEditPlace||(e=j.call(a,e,g)),null!=e&&(k+=e),k},useData:!0})},{"hbsfy/runtime":22}],9:[function(){var a,b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;NZ.AdminRouter=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.appRoutes={"":"showMain",places:"showPlaces",login:"showLogin","*path":"error"},c.prototype.onRoute=function(a,b){var c;return c=NZ.request("get:current:user"),"*path"===b?NZ.navigate("",{trigger:!0}):void 0},c}(Marionette.AppRouter),a={error:function(){},showPlaces:function(){return NZ.execute("show:places:app:controller")},showMain:function(){return NZ.navigate("places",{trigger:!0})},showLogin:function(){var a;return a=NZ.request("get:current:user"),null==a?NZ.execute("show:login:controller",{region:NZ.mainContentRegion}):NZ.navigate("",{trigger:!0})}},NZ.vent.on("start:router",function(){return console.log("start"),new NZ.AdminRouter({controller:a}),NZ.startHistory({pushState:!0,root:"/admin"})})},{}],10:[function(a){a("./marionette-config.coffee")},{"./marionette-config.coffee":11}],11:[function(){_.extend(Marionette.Application.prototype,{navigate:function(a,b){return null==b&&(b={}),Backbone.history.navigate(a,b)},getCurrentRoute:function(){var a;return a=Backbone.history.fragment,_.isEmpty(a)?null:a},startHistory:function(a){return null==a&&(a=null),Backbone.history?a?Backbone.history.start(a):Backbone.history.start():void 0},register:function(a,b){return null==this._registry&&(this._registry={}),this._registry[b]=a},unregister:function(a,b){return delete this._registry[b]},resetRegistry:function(){var a,b,c,d,e;d=this.getRegistrySize(),e=this._registry;for(b in e)a=e[b],a.region.close();return c="There were "+d+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(c,this._registry):console.log(c)},getRegistrySize:function(){return _.size(this._registry)},createEventObject:function(){return{vent:new Backbone.Wreqr.EventAggregator,command:new Backbone.Wreqr.Commands,reqres:new Backbone.Wreqr.RequestResponse}}}),_.extend(Marionette.Region.prototype,{hide:function(){return this.$el.hide()},unhide:function(){return this.$el.show()}})},{}],12:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty,f=[].slice;c=function(a){function b(a){null==a&&(a={}),this.region=a.region||NZ.request("default:region"),this._instance_id=_.uniqueId("controller"),NZ.commands.execute("register:instance",this,this._instance_id),b.__super__.constructor.call(this,a)}return d(b,a),b.prototype.destroy=function(){var a;return a=1<=arguments.length?f.call(arguments,0):[],delete this.region,delete this.options,NZ.commands.execute("unregister:instance",this,this._instance_id),b.__super__.destroy.call(this,a)},b.prototype.show=function(a,b){return null==b&&(b={}),_.defaults(b,{loading:!1,region:this.region}),this._setMainView(a),this._manageView(a,b)},b.prototype._setMainView=function(a){return this._mainView?void 0:(this._mainView=a,this.listenTo(a,"destroy",this.destroy))},b.prototype._manageView=function(a,b){return b.region.show(a)},b}(Marionette.Controller),b.exports=c},{}],13:[function(a){a("./places.coffee")},{"./places.coffee":14}],14:[function(){var a,b,c=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},d={}.hasOwnProperty;NZ.PlacesModel=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.name="place",b.prototype.idAttribute="_id",b.prototype.urlRoot="/places",b}(Backbone.Model),NZ.PlacesCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.model=NZ.PlacesModel,b.prototype.url="/places",b}(Backbone.Collection),b=new NZ.PlacesCollection,a={getPlacesList:function(a){var c;return c=new Promise(function(c,d){var e,f;return e=new NZ.PlacesCollection,f=b.filter(function(b){return b.get("parent")===a}),console.log(f),e.add(f),e.size()?c(e):e.fetch({data:{parent:a},success:function(a){return b.add(a.models),c(a)},error:function(a,b){return d(b)}})})},getPlaceById:function(a){var c;return c=new Promise(function(c,d){var e;return e=b.get(a),e?c(e):(e=new NZ.PlacesModel({id:a}),e.fetch({success:function(a){return c(a)},error:function(a,b){return d(b)}}))})},createPlaces:function(a){var c,d;return c=new NZ.PlacesModel(a),console.log(a),d=new Promise(function(a,d){return c.save(null,{success:function(c){return b.add(c),a(c)},error:function(a,b){return d(a,b)}})})}},NZ.reqres.setHandler("get:places:list",function(b){return a.getPlacesList(b)}),NZ.reqres.setHandler("create:places",function(b){return a.createPlaces(b)}),NZ.reqres.setHandler("get:place:by:id",function(b){return a.getPlaceById(b)})},{}],15:[function(a,b,c){(function(b){"use strict";var d=a("./handlebars/base"),e=a("./handlebars/safe-string")["default"],f=a("./handlebars/exception")["default"],g=a("./handlebars/utils"),h=a("./handlebars/runtime"),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.escapeExpression=g.escapeExpression,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i;var k="undefined"!=typeof b?b:window,l=k.Handlebars;j.noConflict=function(){k.Handlebars===j&&(k.Handlebars=l)},j["default"]=j,c["default"]=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./handlebars/base":16,"./handlebars/exception":17,"./handlebars/runtime":18,"./handlebars/safe-string":19,"./handlebars/utils":20}],16:[function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){function c(b,c,g){d&&(d.key=b,d.index=c,d.first=0===c,d.last=!!g,e&&(d.contextPath=e+b)),m+=h(a[b],{data:d,blockParams:f.blockParams([a[b],b],[e+b,null])})}if(!b)throw new g("Must pass iterator to #each");var d,e,h=b.fn,i=b.inverse,j=0,m="";if(b.data&&b.ids&&(e=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),l(a)&&(a=a.call(this)),b.data&&(d=q(b.data)),a&&"object"==typeof a)if(k(a))for(var n=a.length;n>j;j++)c(j,j,j===a.length-1);
else{var o;for(var p in a)a.hasOwnProperty(p)&&(o&&c(o,j-1),o=p,j++);o&&c(o,j-1,!0)}return 0===j&&(m=i(this)),m}),a.registerHelper("if",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var f=a("./utils"),g=a("./exception")["default"],h="3.0.0";c.VERSION=h;var i=6;c.COMPILER_REVISION=i;var j={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};c.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n="[object Object]";c.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(m.call(a)===n)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new g("Attempting to register a partial as undefined");this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(a,b){if("undefined"!=typeof console&&o.level<=a){var c=o.methodMap[a];(console[c]||console.log).call(console,b)}}};c.logger=o;var p=o.log;c.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};c.createFrame=q},{"./exception":17,"./utils":20}],17:[function(a,b,c){"use strict";function d(a,b){var c,d,f=b&&b.loc;f&&(c=f.start.line,d=f.start.column,a+=" - "+c+":"+d);for(var g=Error.prototype.constructor.call(this,a),h=0;h<e.length;h++)this[e[h]]=g[e[h]];f&&(this.lineNumber=c,this.column=d)}var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d},{}],18:[function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");if(!a||!a.main)throw new l("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e){e.hash&&(d=k.extend({},d,e.hash)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new l("The partial "+e.name+" could not be compiled when running in runtime-only mode")},d={strict:function(a,b){if(!(b in a))throw new l('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:k.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=k.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=j(b,f));var g,h=a.useBlockParams?[]:void 0;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,h,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e,g){if(a.useBlockParams&&!e)throw new l("must pass block params");if(a.useDepths&&!g)throw new l("must pass parent depths");return f(d,b,a[b],c,0,e,g)},e}function f(a,b,c,d,e,f,g){var h=function(b,e){return e=e||{},c.call(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),g&&[b].concat(g))};return h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a=c.partials[c.name],a}function h(a,b,c){if(c.partial=!0,void 0===a)throw new l("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?o(b):{},b.root=a),b}var k=a("./utils"),l=a("./exception")["default"],m=a("./base").COMPILER_REVISION,n=a("./base").REVISION_CHANGES,o=a("./base").createFrame;c.checkRevision=d,c.template=e,c.program=f,c.resolvePartial=g,c.invokePartial=h,c.noop=i},{"./base":16,"./exception":17,"./utils":20}],19:[function(a,b,c){"use strict";function d(a){this.string=a}d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c["default"]=d},{}],20:[function(a,b,c){"use strict";function d(a){return k[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){return a&&a.toHTML?a.toHTML():null==a?"":a?(a=""+a,m.test(a)?a.replace(l,d):a):a+""}function h(a){return a||0===a?p(a)&&0===a.length?!0:!1:!0}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,m=/[&<>"'`]/;c.extend=e;var n=Object.prototype.toString;c.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)});var o;c.isFunction=o;var p=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===n.call(a):!1};c.isArray=p,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.blockParams=i,c.appendContextPath=j},{}],21:[function(a,b){b.exports=a("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":15}],22:[function(a,b){b.exports=a("handlebars/runtime")["default"]},{"handlebars/runtime":21}]},{},[2]);
//# sourceMappingURL=admin-app.min.js.map